"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var data_forge_1 = require("data-forge");
function computeK(values) {
    return 100 * (values[values.length - 1].close - Math.min.apply(null, values.map(function (value) { return value.low; }))) / (Math.max.apply(null, values.map(function (value) { return value.high; })) - Math.min.apply(null, values.map(function (value) { return value.low; })));
}
function stochasticK(period) {
    chai_1.assert.isNumber(period, "Expected 'period' parameter to 'Series.stochastic' to be a number.");
    return this.rollingWindow(period)
        .select(function (window) {
        return [
            window.getIndex().last(),
            computeK(window.toArray())
        ];
    })
        .withIndex(function (pair) { return pair[0]; })
        .select(function (pair) { return pair[1]; });
}
data_forge_1.DataFrame.prototype.stochasticK = stochasticK;
//# sourceMappingURL=stochastic-k.js.map
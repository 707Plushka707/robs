"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var data_forge_1 = require("data-forge");
//
// Compute exponent weighted average for a bunch of numbers.
//
function computeEma(values, multiplier) {
    if (values.length === 0) {
        return 0;
    }
    if (values.length === 1) {
        return values[0];
    }
    var latest = values[0];
    for (var i = 1; i < values.length; ++i) {
        latest = (multiplier * values[i]) + ((1 - multiplier) * latest);
    }
    return latest;
}
function ema(period) {
    chai_1.assert.isNumber(period, "Expected 'period' parameter to 'Series.ema' to be a number that specifies the time period of the moving average.");
    var multiplier = (2 / (period + 1));
    return this.rollingWindow(period)
        .select(function (window) { return computeEma(window.toArray(), multiplier); });
}
data_forge_1.Series.prototype.ema = ema;
//# sourceMappingURL=ema.js.map